<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:os="http://www.mulesoft.org/schema/mule/os"
    xmlns:apikit="http://www.mulesoft.org/schema/mule/mule-apikit" xmlns:wsc="http://www.mulesoft.org/schema/mule/wsc"
    xmlns:api-gateway="http://www.mulesoft.org/schema/mule/api-gateway"
    xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:json-logger="http://www.mulesoft.org/schema/mule/json-logger" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/json-logger http://www.mulesoft.org/schema/mule/json-logger/current/mule-json-logger.xsd
http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd
http://www.mulesoft.org/schema/mule/api-gateway http://www.mulesoft.org/schema/mule/api-gateway/current/mule-api-gateway.xsd
http://www.mulesoft.org/schema/mule/wsc http://www.mulesoft.org/schema/mule/wsc/current/mule-wsc.xsd
http://www.mulesoft.org/schema/mule/mule-apikit http://www.mulesoft.org/schema/mule/mule-apikit/current/mule-apikit.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd">
    <configuration-properties doc:name="Environment Configuration properties" doc:id="04e0d031-a00b-4171-aeaa-2059f201778f" file="props/${mule.env}-properties.yaml" />
    <configuration-properties doc:name="API Configuration properties" doc:id="9fbe12e6-373c-490b-b3a2-87d39f577e45" file="props/common-properties.yaml" />
    <configuration-properties doc:name="Error Code Configuration properties" doc:id="d90aafaf-2c1a-4cc0-bde4-9d9bbd2bd5f8" file="props/error-codes.yaml" />
    <secure-properties:config name="Secure_Properties_Config" doc:name="Secure Properties Config" doc:id="faf8cc42-95ec-4085-b014-6c1e9cd77e26" file="props/${mule.env}-secure-properties.yaml" key="${mule.key}" >
        <secure-properties:encrypt algorithm="Blowfish" />
    </secure-properties:config>
    <json-logger:config name="JSON_Logger_Config" doc:name="JSON Logger Config" doc:id="b09ca955-6a01-4495-b7bc-a76757fa7562" environment="${mule.env}" contentFieldsDataMasking="${json.logger.masked.fields}"/>
 	 	 	<apikit:config name="employee-ehr-sapi-config" api="resource::da347778-dee3-4005-a19b-82b152284424:employee-ehr-sapi:1.2.22:oas:zip:employee-ehr-sapi.yaml" outboundHeadersMapName="outboundHeadersMapName" httpStatusVarName="httpStatus" />
 	 	<wsc:config name="successfactors-ws-consumer-config-operations" doc:name="Web Service Consumer Config" doc:id="bf8b45ec-86e1-4caf-a3a7-2bb37cd83a08" >
        <wsc:connection wsdlLocation="${ws.successfactors.connection.wsdl}" service="${ws.successfactors.connection.service}" port="${ws.successfactors.connection.port}" address="https://${ws.successfactors.host}" >
			<reconnection >
				<reconnect frequency="${ws.successfactors.reconnectStrategy.frequency}" count="${ws.successfactors.reconnectStrategy.maxRetries}" />
			</reconnection>
			<wsc:custom-transport-configuration >
				<wsc:default-http-transport-configuration timeout="${ws.successfactors.timeout}" />
			</wsc:custom-transport-configuration>
        </wsc:connection>
    </wsc:config>
    <wsc:config name="successfactors-ws-consumer-config-login" doc:name="Web Service Consumer Config" doc:id="f4d51839-b0a1-42cc-bab1-13ccccead3c2" >
        <wsc:connection wsdlLocation="${ws.successfactors.connection.wsdl}" service="${ws.successfactors.connection.service}" port="${ws.successfactors.connection.port}" address="https://${ws.successfactors.host}">
			<reconnection >
				<reconnect frequency="${ws.successfactors.reconnectStrategy.frequency}" count="${ws.successfactors.reconnectStrategy.maxRetries}" />
			</reconnection>
			<wsc:custom-transport-configuration >
				<wsc:default-http-transport-configuration timeout="${ws.successfactors.timeout}" />
			</wsc:custom-transport-configuration>
		
</wsc:connection>
    </wsc:config>
	<http:request-config name="HTTP_Request_odata" doc:name="HTTP Request configuration" doc:id="c0a8e4ab-ca4c-483c-b790-d55fea273094" responseTimeout="${ehr.em.timeout}">
		<http:request-connection protocol="${ehr.protocol}" host="${ehr.host}" port="${ehr.port}" connectionIdleTimeout="${ws.successfactors.timeout}">
			<reconnection >
				<reconnect frequency="${ehr.em.reconnection.frequency}" count="${ehr.em.reconnection.attempts}"/>
			</reconnection>
		</http:request-connection>
		<http:default-headers >
			<http:default-header key="companyID" value="${secure::ehr.companyID}" />
			<http:default-header key="Authorization" value='#["Basic " ++ "${secure::ehr.Authorization}"]' />
			<http:default-header key="Accept" value="application/json" />
		</http:default-headers>
	</http:request-config>
    <http:listener-config name="employee-ehr-sapi-http-listener-config">
        <http:listener-connection host="${httpListener.host}" port="${httpListener.port}" readTimeout="${httpListener.readTimeout}" connectionIdleTimeout="${httpListener.connectionIdleTimeout}" />
    </http:listener-config>
    <api-gateway:autodiscovery apiId="${api.id}" ignoreBasePath="true" doc:name="API Autodiscovery" doc:id="e61c88f5-916c-4b09-8a75-e6468919b3d9" flowRef="employee-ehr-sapi-main" />
	<http:request-config name="HTTP_Request_configuration_struct_emp_sapi_hrcn" doc:name="HTTP Request configuration" doc:id="e40fe72f-f8df-4d33-b7b4-e238034c5c33" basePath="${sapi.hrcn.structAndEmp.path}" responseTimeout="${sapi.hrcn.structAndEmp.timeout}">
		<http:request-connection protocol="HTTPS" host="${sapi.hrcn.structAndEmp.host}" port="${sapi.hrcn.structAndEmp.port}" >
			<reconnection >
				<reconnect frequency="${sapi.hrcn.structAndEmp.reconnection.frequency}" count="${sapi.hrcn.structAndEmp.reconnection.attempts}" />
			</reconnection>
		</http:request-connection>
		<http:default-headers >
			<http:default-header key="client_id" value="${secure::struct-and-emp-sapi.client_id}" />
			<http:default-header key="client_secret" value="${secure::struct-and-emp-sapi.client_secret}" />
		</http:default-headers>
	</http:request-config>
	<http:request-config name="HTTP_Request_Odata_Work_Experience" doc:name="HTTP Request configuration" doc:id="afbf2ea8-c2eb-4bca-8e69-2dc5920c7be7" responseTimeout="${ehr.em.timeout}">
		<http:request-connection protocol="${ehr.protocol}" host="${ehr.host}" port="${ehr.port}" connectionIdleTimeout="${ws.successfactors.timeout}">
			<reconnection >
				<reconnect frequency="${ehr.em.reconnection.frequency}" count="${ehr.em.reconnection.attempts}"/>
			</reconnection>
		</http:request-connection>
		<http:default-headers >
			<http:default-header key="companyID" value="${secure::ehr.companyID}" />
			<http:default-header key="Authorization" value='#["Basic " ++ "${secure::ehr.Authorization}"]' />
		</http:default-headers>
	</http:request-config>
	<os:object-store name="Object_store" doc:name="Object store" doc:id="d938dbd3-5771-43eb-8574-a1fd4274fe95" entryTtl="${objectStore.ttl}" entryTtlUnit="MINUTES" expirationInterval="${objectStore.expInterval}" config-ref="ObjectStore_Config"/>
	<os:config name="ObjectStore_Config" doc:name="ObjectStore Config" doc:id="04b3a748-5dc7-44ed-a2b2-7387fe5d521c" >
		<os:connection >
			<reconnection >
				<reconnect frequency="${objectStore.reconnectStrategy.frequency}" count="${objectStore.reconnectStrategy.maxRetries}" />
			</reconnection>
		</os:connection>
	</os:config>
	
</mule>